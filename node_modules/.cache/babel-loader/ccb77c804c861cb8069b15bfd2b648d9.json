{"ast":null,"code":"import _toConsumableArray from\"V:/financial-picture/financial-picture/.yarn/cache/@babel-runtime-npm-7.19.0-86b37fbb72-fa69c351bb.zip/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"V:/financial-picture/financial-picture/.yarn/cache/@babel-runtime-npm-7.19.0-86b37fbb72-fa69c351bb.zip/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"V:/financial-picture/financial-picture/.yarn/cache/@babel-runtime-npm-7.19.0-86b37fbb72-fa69c351bb.zip/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"V:/financial-picture/financial-picture/.yarn/cache/@babel-runtime-npm-7.19.0-86b37fbb72-fa69c351bb.zip/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useContext}from'react';import{AppContext}from'../../../contexts/AppContext';import TransactionRow from'./TransactionRow';import TransactionHeader from'./TransactionHeader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TransactionChart=function TransactionChart(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),transactionData=_useState2[0],setTransactionData=_useState2[1];var _useContext=useContext(AppContext),globalState=_useContext.globalState,dispatch=_useContext.dispatch;var _useState3=useState({query:'',queryValid:true}),_useState4=_slicedToArray(_useState3,2),formData=_useState4[0],setFormData=_useState4[1];var _useState5=useState({sortBy:'',inverse:false}),_useState6=_slicedToArray(_useState5,2),activeSort=_useState6[0],setActiveSort=_useState6[1];useEffect(function(){dispatch({type:'GET_TRANSACTIONS',token:globalState.loginToken});},[]);useEffect(function(){if(globalState.transactionData)setTransactionData(globalState.transactionData);},[globalState.transactionData]);function search(arr){if(formData.query.length===0)return arr;return arr.filter(function(transaction){return formData.query.length<=2&&transaction.title.toLowerCase().startsWith(formData.query.toLowerCase())||formData.query.length>2&&transaction.title.toLowerCase().includes(formData.query.toLowerCase());});}function handleFormChange(event){setFormData(function(prevFormData){return _objectSpread(_objectSpread({},prevFormData),{},_defineProperty({},event.target.name,event.target.value));});}function sortData(sortBy,adapter){var sortedData=_toConsumableArray(transactionData);if(adapter){sortedData.sort(function(a,b){if(adapter(a[sortBy])<adapter(b[sortBy]))return-1;if(adapter(a[sortBy])>adapter(b[sortBy]))return 1;return 0;});}else{sortedData.sort(function(a,b){if(a[sortBy]<b[sortBy])return-1;if(a[sortBy]>b[sortBy])return 1;return 0;});}if(sortBy===activeSort.sortBy&&!activeSort.inverse){sortedData.reverse();setActiveSort(function(prevActiveSort){return _objectSpread(_objectSpread({},prevActiveSort),{},{inverse:true});});}else{setActiveSort(function(prevActiveSort){return _objectSpread(_objectSpread({},prevActiveSort),{},{sortBy:sortBy,inverse:false});});}setTransactionData(sortedData);}return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-end\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"text-right lg:w-1/4 px-1 py-2 rounded-md border-2 outline-0\\n        \".concat(formData.queryValid?'border-white':'border-rose-600'),type:\"search\",placeholder:\"Search\",onChange:handleFormChange,name:\"query\",value:formData.query}),/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto border border-slate-400 bg-slate-50 mt-4 text-center\",children:[/*#__PURE__*/_jsx(TransactionHeader,{activeSort:activeSort,sortData:sortData}),/*#__PURE__*/_jsx(\"tbody\",{className:\"flex flex-col\",children:search(transactionData).map(function(transaction,transactionIndex){return/*#__PURE__*/_jsx(TransactionRow,{transaction:transaction,transactionIndex:transactionIndex,setTransactionData:setTransactionData},transactionIndex);})})]})]});};export default TransactionChart;","map":{"version":3,"names":["React","useEffect","useState","useContext","AppContext","TransactionRow","TransactionHeader","TransactionChart","transactionData","setTransactionData","globalState","dispatch","query","queryValid","formData","setFormData","sortBy","inverse","activeSort","setActiveSort","type","token","loginToken","search","arr","length","filter","transaction","title","toLowerCase","startsWith","includes","handleFormChange","event","prevFormData","target","name","value","sortData","adapter","sortedData","sort","a","b","reverse","prevActiveSort","map","transactionIndex"],"sources":["V:/financial-picture/financial-picture/src/components/molecules/TransactionChart/TransactionChart.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\nimport { AppContext } from '../../../contexts/AppContext'\nimport TransactionRow from './TransactionRow'\nimport TransactionHeader from './TransactionHeader'\n\nconst TransactionChart = () => {\n  const [transactionData, setTransactionData] = useState([])\n  const { globalState, dispatch } = useContext(AppContext)\n  const [formData, setFormData] = useState({ query: '', queryValid: true })\n  const [activeSort, setActiveSort] = useState({ sortBy: '', inverse: false })\n\n  useEffect(() => {\n    dispatch({ type: 'GET_TRANSACTIONS', token: globalState.loginToken })\n  }, [])\n  useEffect(() => {\n    if (globalState.transactionData) setTransactionData(globalState.transactionData)\n  }, [globalState.transactionData])\n\n  function search(arr) {\n    if (formData.query.length === 0) return arr\n    return arr.filter((transaction) => {\n      return (\n        (formData.query.length <= 2 &&\n          transaction.title.toLowerCase().startsWith(formData.query.toLowerCase())) ||\n        (formData.query.length > 2 &&\n          transaction.title.toLowerCase().includes(formData.query.toLowerCase()))\n      )\n    })\n  }\n\n  function handleFormChange(event) {\n    setFormData((prevFormData) => {\n      return {\n        ...prevFormData,\n        [event.target.name]: event.target.value\n      }\n    })\n  }\n\n  function sortData(sortBy, adapter) {\n    const sortedData = [...transactionData]\n    if (adapter) {\n      sortedData.sort((a, b) => {\n        if (adapter(a[sortBy]) < adapter(b[sortBy])) return -1\n        if (adapter(a[sortBy]) > adapter(b[sortBy])) return 1\n        return 0\n      })\n    } else {\n      sortedData.sort((a, b) => {\n        if (a[sortBy] < b[sortBy]) return -1\n        if (a[sortBy] > b[sortBy]) return 1\n        return 0\n      })\n    }\n    if (sortBy === activeSort.sortBy && !activeSort.inverse) {\n      sortedData.reverse()\n      setActiveSort((prevActiveSort) => ({ ...prevActiveSort, inverse: true }))\n    } else {\n      setActiveSort((prevActiveSort) => ({ ...prevActiveSort, sortBy, inverse: false }))\n    }\n    setTransactionData(sortedData)\n  }\n\n  return (\n    <div className='flex flex-col items-end'>\n      <input\n        className={`text-right lg:w-1/4 px-1 py-2 rounded-md border-2 outline-0\n        ${formData.queryValid ? 'border-white' : 'border-rose-600'}`}\n        type='search'\n        placeholder='Search'\n        onChange={handleFormChange}\n        name='query'\n        value={formData.query}\n      />\n      <table className='table-auto border border-slate-400 bg-slate-50 mt-4 text-center'>\n        <TransactionHeader activeSort={activeSort} sortData={sortData} />\n        <tbody className='flex flex-col'>\n          {search(transactionData).map((transaction, transactionIndex) => {\n            return (\n              <TransactionRow\n                key={transactionIndex}\n                transaction={transaction}\n                transactionIndex={transactionIndex}\n                setTransactionData={setTransactionData}\n              />\n            )\n          })}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n\nexport default TransactionChart\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}